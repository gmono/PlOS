 # PlOS
基于Web前端技术的可扩展WebOS系统
## 协议
已经确定系统内“远距离调用”采用IPOP(内部公共访问协议)实现互相调用
此协议正在制定中 将成为系统内进程间通信和系统调用的核心部分
预计将分为Server和Client两部分 Server可以放在任何地方 与任何客户端无关
此协议预计将包括以下子协议
### 调用协议
存在于Client端和Server端
通过标准通信数据包传递调用和返回信息，包括一组异步方法用于解析操作和返回值
### 声明协议
用于Client端提交声明信息到Server端
Server端产生相应的代理函数(异步)供调用
### 查询协议
用于Client向Server查询可供调用的方法的信息

## 协议整体说明
此协议与相应库目的在于提供一组跨线程的直观的互相调用的接口
屏蔽通信交互的复杂操作
对Worker调用系统接口提供友好界面
同时屏蔽内部具体实现，增强可维护性，目前考虑使用JSON传递参数和返回值
但同时考虑允许采用更高性能的Shared ArrayBuffer传递大体积数据
### 传输层 
传输层负责数据的传输 标准接口ITransPort 
传输层提供两个数据发送的形式 一个是发送Object 一个是发送Blob(ArrayBuffer)
同时提供对接收Object和Blog的监听函数的注册功能 
以及“总传输函数(data)=>void”的设置接口
传输层仅负责数据的传输 一切数据传输以此为直接接口
# 目前进展 
传输层接口定义完毕，纯JSON传输层已经写好，当然这个只能做测试用 
未来考虑用更复杂的传输层
# 对IPOP传输层的补充说明
TransPort实际上是一个数据管道，其入口为Send函数，出口为TransFunc函数，它提供三个的通道，一个是直接传输通道以InnerSend为入口，一个是正向转换的传输通道，以SendData为入口，一个是反向转换的传输通道，以Receive为入口，出口都是TransFunc 
此管道通过正向反向拼装就可以形成一个完整的传输通道，实现对数据的传输和类型转换控制 
注意传输层不参与具体的数据收发